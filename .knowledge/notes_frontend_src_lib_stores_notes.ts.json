{"is_source_file": true, "format": "TypeScript", "description": "This file defines a Svelte store for managing notes, including types and functions for creating, updating, deleting, and storing notes in localStorage, as well as utility functions for handling note attributes like tags, pinned and archived status.", "external_files": ["$app/environment", "svelte/store"], "external_methods": ["browser", "get", "writable"], "published": ["notesStore"], "classes": [], "methods": [{"name": "function loadFromStorage(): Note[] { loadFromStorage", "description": "Loads an array of notes from localStorage, with validation and default value adjustments.", "scope": "", "scopeKind": ""}, {"name": "function saveToStorage(notes: Note[]) { saveToStorage", "description": "Saves the current notes array to localStorage.", "scope": "", "scopeKind": ""}, {"name": "function uid() { uid", "description": "Generates a simple unique identifier string.", "scope": "", "scopeKind": ""}, {"name": "function sortNotes(a: Note, b: Note) { sortNotes", "description": "Sorts notes by pinned status and updatedAt timestamp.", "scope": "", "scopeKind": ""}, {"name": "function createNotesStore() { createNotesStore", "description": "Creates and returns a Svelte store managing notes with methods for CRUD operations and other utilities.", "scope": "", "scopeKind": ""}, {"name": "function addTag(id: string, tag: string) { addTag", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function allTags(): string[] { allTags", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function removeTag(id: string, tag: string) { removeTag", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function toggleArchived(id: string) { toggleArchived", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["localStorage.getItem", "JSON.parse", "localStorage.setItem", "JSON.stringify", "get", "Date.now", "Array.prototype.slice", "Array.prototype.find", "Array.prototype.findIndex", "Array.prototype.filter", "Array.prototype.forEach", "Array.prototype.sort", "new Date()"], "search-terms": ["notes store", "local storage notes", "pinned notes", "archived notes", "tag management", "note sorting", "note CRUD", "Svelte notes", "notes unique id"], "state": 2, "file_id": 13, "knowledge_revision": 27, "git_revision": "", "ctags": [{"_type": "tag", "name": "Note", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export type Note = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "NoteDraft", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export type NoteDraft = Partial<Omit<Note, 'id' | 'createdAt' | 'updatedAt'>> & {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^const STORAGE_KEY = 'notes_app_data_v1';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "Writable", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^import { get, writable, type Writable } from 'svelte\\/store';$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "addTag", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  function addTag(id: string, tag: string) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "allTags", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  function allTags(): string[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "archived", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^          archived: draft.archived ?? notes[idx].archived,$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "archived", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const updated = { ...notes[idx], archived: !notes[idx].archived, updatedAt: now };$/", "language": "TypeScript", "kind": "constant", "scope": "toggleArchived", "scopeKind": "function"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^          content: draft.content ?? notes[idx].content,$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "createNotesStore", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^function createNotesStore() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "created", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const created: Note = {$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "entry", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const entry = notes[idx];$/", "language": "TypeScript", "kind": "constant", "scope": "addTag", "scopeKind": "function"}, {"_type": "tag", "name": "entry", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const entry = notes[idx];$/", "language": "TypeScript", "kind": "constant", "scope": "removeTag", "scopeKind": "function"}, {"_type": "tag", "name": "filtered", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const filtered = get(store).filter((n) => n.id !== id);$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^          ...notes[idx],$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^          archived: draft.archived ?? notes[idx].archived,$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^          content: draft.content ?? notes[idx].content,$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^          pinned: draft.pinned ?? notes[idx].pinned,$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^          tags: draft.tags ?? notes[idx].tags,$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^          title: draft.title ?? notes[idx].title,$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^      const idx = notes.findIndex((n) => n.id === draft.id);$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const entry = notes[idx];$/", "language": "TypeScript", "kind": "constant", "scope": "addTag", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const entry = notes[idx];$/", "language": "TypeScript", "kind": "constant", "scope": "removeTag", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const idx = notes.findIndex((n) => n.id === id);$/", "language": "TypeScript", "kind": "constant", "scope": "addTag", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const idx = notes.findIndex((n) => n.id === id);$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const idx = notes.findIndex((n) => n.id === id);$/", "language": "TypeScript", "kind": "constant", "scope": "removeTag", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const idx = notes.findIndex((n) => n.id === id);$/", "language": "TypeScript", "kind": "constant", "scope": "toggleArchived", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const updated = { ...notes[idx], archived: !notes[idx].archived, updatedAt: now };$/", "language": "TypeScript", "kind": "constant", "scope": "toggleArchived", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const updated = { ...notes[idx], pinned: !notes[idx].pinned, updatedAt: now };$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "initial", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  const initial = loadFromStorage().sort(sortNotes);$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "loadFromStorage", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^function loadFromStorage(): Note[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const next = [...notes.slice(0, idx), updated, ...notes.slice(idx + 1)];$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const next = [...notes.slice(0, idx), updated, ...notes.slice(idx + 1)];$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^          archived: draft.archived ?? notes[idx].archived,$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^          content: draft.content ?? notes[idx].content,$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^          pinned: draft.pinned ?? notes[idx].pinned,$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^          tags: draft.tags ?? notes[idx].tags,$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^          title: draft.title ?? notes[idx].title,$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const notes = get(store);$/", "language": "TypeScript", "kind": "constant", "scope": "addTag", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const notes = get(store);$/", "language": "TypeScript", "kind": "constant", "scope": "allTags", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const notes = get(store);$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const notes = get(store);$/", "language": "TypeScript", "kind": "constant", "scope": "removeTag", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const notes = get(store);$/", "language": "TypeScript", "kind": "constant", "scope": "toggleArchived", "scopeKind": "function"}, {"_type": "tag", "name": "notesStore", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^export const notesStore = createNotesStore();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "now", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const now = new Date().toISOString();$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "now", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const now = new Date().toISOString();$/", "language": "TypeScript", "kind": "constant", "scope": "toggleArchived", "scopeKind": "function"}, {"_type": "tag", "name": "parsed", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const parsed = JSON.parse(raw) as Note[];$/", "language": "TypeScript", "kind": "constant", "scope": "loadFromStorage", "scopeKind": "function"}, {"_type": "tag", "name": "pinned", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^          pinned: draft.pinned ?? notes[idx].pinned,$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "pinned", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const updated = { ...notes[idx], pinned: !notes[idx].pinned, updatedAt: now };$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const raw = localStorage.getItem(STORAGE_KEY);$/", "language": "TypeScript", "kind": "constant", "scope": "loadFromStorage", "scopeKind": "function"}, {"_type": "tag", "name": "removeTag", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  function removeTag(id: string, tag: string) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "saveToStorage", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^function saveToStorage(notes: Note[]) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "sortNotes", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^function sortNotes(a: Note, b: Note) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "store", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  const store: Writable<Note[]> = writable(initial);$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^          tags: draft.tags ?? notes[idx].tags,$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const tags = (entry.tags ?? []).filter((t) => t !== tag);$/", "language": "TypeScript", "kind": "constant", "scope": "removeTag", "scopeKind": "function"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const tags = [...new Set([...(entry.tags ?? []), tag])];$/", "language": "TypeScript", "kind": "constant", "scope": "addTag", "scopeKind": "function"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const tags = new Set<string>();$/", "language": "TypeScript", "kind": "constant", "scope": "allTags", "scopeKind": "function"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^          title: draft.title ?? notes[idx].title,$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "toggleArchived", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^  function toggleArchived(id: string) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "uid", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^function uid() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^        const updated: Note = {$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const updated = { ...notes[idx], archived: !notes[idx].archived, updatedAt: now };$/", "language": "TypeScript", "kind": "constant", "scope": "toggleArchived", "scopeKind": "function"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^    const updated = { ...notes[idx], pinned: !notes[idx].pinned, updatedAt: now };$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/notemaster-59166-59080/notes_frontend/src/lib/stores/notes.ts", "pattern": "/^          updatedAt: now$/", "language": "TypeScript", "kind": "constant", "scope": "createNotesStore", "scopeKind": "function"}], "hash": "988e764ce720b300027fb0b76a70854a", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/lib/stores/notes.ts", "revision_history": [{"27": ""}]}